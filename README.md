# Motor Land

Интернет-магазин контрактных двигателей и КПП в Алматы.

## Описание

Motor Land — это веб-сайт компании, специализирующейся на поставке контрактных двигателей и коробок передач для автомобилей. Проект представляет собой полнофункциональный интернет-магазин с системой управления контентом, каталогом товаров, фильтрацией по марке, модели и году выпуска автомобиля.

## Технологии

- **Backend:** PHP 7.4+
- **База данных:** MySQL (mysqli)
- **Frontend:** HTML5, CSS3, JavaScript (jQuery)
- **CMS:** Собственная система управления контентом (Hyst)
- **Дополнительные библиотеки:**
  - jQuery
  - jQuery UI
  - CKEditor (для административной панели)
  - Revealator (для анимаций)

## Структура проекта

```
motor-land.kz/
├── hyst/                    # Система управления контентом
│   ├── config.php          # Конфигурация базы данных
│   ├── php.php             # Инициализация системы
│   ├── core/               # Ядро CMS
│   │   ├── functions.php   # Основные функции
│   │   ├── constants.php   # Константы и регулярные выражения
│   │   ├── setups.php     # Настройки системы
│   │   └── html.php       # HTML-шаблоны админки
│   ├── mods/              # Модули CMS
│   │   ├── online_store/  # Модуль интернет-магазина
│   │   ├── sliders/       # Модуль слайдеров
│   │   ├── simple_texts/  # Модуль простых текстов
│   │   ├── simple_images/ # Модуль изображений
│   │   └── customtexts/   # Модуль пользовательских текстов
│   └── visual/            # Стили и скрипты админки
├── des/                    # Дизайн-компоненты сайта
│   ├── head.php           # Шапка сайта
│   ├── foter.php          # Подвал сайта
│   ├── menu.php           # Меню навигации
│   └── myjs.js            # JavaScript для фронтенда
├── img/                    # Изображения сайта
├── cms_img/                # Изображения контента (загруженные через CMS)
├── index.php               # Главная страница
├── catalog.php             # Страница каталога товаров
├── detal.php               # Страница детального просмотра товара
├── actions.php             # Страница акций
├── contacts.php            # Страница контактов
├── guarantees.php          # Страница гарантий
├── pay.php                 # Страница оплаты
├── service.php             # Страница сервиса
├── send_form.php           # Обработчик форм обратной связи
├── getf.php                # AJAX-обработчик фильтров
├── getdtls.php             # AJAX-обработчик автоподбора
├── css.css                 # Основные стили
├── mob.css                 # Мобильные стили
└── tab.css                 # Стили для планшетов
```

## Установка и запуск

### Требования

- PHP 7.4 или выше
- MySQL 5.7 или выше
- Apache с поддержкой mod_rewrite
- Расширения PHP:
  - mysqli
  - openssl
  - gd (для работы с изображениями)

### Установка

1. Клонируйте репозиторий или скопируйте файлы на веб-сервер:

```bash
git clone <repository-url>
cd mystic
```

2. Настройте базу данных:

Откройте файл `motor-land.kz/hyst/config.php` и укажите данные для подключения:

```php
define("DB_HOST", "localhost");
define("DB_USER", "your_username");
define("DB_PASSWORD", "your_password");
define("DB_BASE", "your_database");
```

3. Создайте необходимые таблицы базы данных (структура создается автоматически при первом запуске через админ-панель).

4. Убедитесь, что директории `cms_img` доступны для записи:

```bash
chmod 777 motor-land.kz/cms_img
```

5. Откройте сайт в браузере и перейдите в админ-панель по адресу `/adm.php`.

6. При первом входе создайте администратора системы.

### Конфигурация

Основные настройки находятся в файлах:
- `motor-land.kz/hyst/config.php` — подключение к БД, email, URL сайта
- `motor-land.kz/hyst/core/constants.php` — регулярные выражения для валидации

## Основные возможности

### Для пользователей

- Просмотр каталога контрактных двигателей и КПП
- Фильтрация по марке, модели и году выпуска автомобиля
- Детальный просмотр товаров с описанием и характеристиками
- Просмотр акционных предложений
- Отправка заявок на консультацию и заказ товаров
- Просмотр контактной информации и гарантий

### Для администраторов

- Управление товарами (добавление, редактирование, удаление)
- Управление категориями и подкатегориями
- Управление слайдерами на главной странице
- Управление текстовым контентом сайта
- Загрузка и управление изображениями
- Управление модераторами системы

## Безопасность

В проекте реализованы следующие меры безопасности:

- **Prepared Statements:** Все SQL-запросы используют подготовленные запросы для предотвращения SQL-инъекций
- **Валидация данных:** Входные данные проверяются регулярными выражениями
- **Экранирование вывода:** Использование `htmlspecialchars()` для предотвращения XSS-атак
- **Современное шифрование:** Использование OpenSSL вместо устаревших функций mcrypt

## Разработка

### Архитектура

Проект построен на собственной CMS-системе Hyst, которая обеспечивает модульную архитектуру:

- **Ядро системы** (`hyst/core/`) — базовые функции и классы
- **Модули** (`hyst/mods/`) — независимые функциональные модули
- **Визуальные компоненты** (`hyst/visual/`) — стили и скрипты админ-панели

### Работа с базой данных

Все запросы к базе данных выполняются через подготовленные запросы:

```php
$stmt = $_DB_CONECT->prepare("SELECT * FROM table WHERE id = ?");
$stmt->bind_param("i", $id);
$stmt->execute();
$result = $stmt->get_result();
```

### Добавление нового модуля

1. Создайте директорию в `hyst/mods/your_module/`
2. Создайте файл `info.ini` с метаинформацией модуля
3. Создайте файл `index.php` для административного интерфейса
4. Создайте файл `proces.php` для обработки AJAX-запросов

## Производительность

- Оптимизированные SQL-запросы с использованием индексов
- Кеширование версий CSS/JS через параметр версии в URL
- Минификация JavaScript для production
- Оптимизация изображений через функцию `hyst_img_resize()`

## Лицензия

Проект является коммерческим продуктом компании Motor Land.

## Контакты

Для вопросов и предложений обращайтесь по контактам, указанным на сайте.

---

**Версия:** 1.0  
**Последнее обновление:** 2025

